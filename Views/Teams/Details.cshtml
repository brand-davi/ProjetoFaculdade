@model ProjectManagerMvc.Models.Team
@{
    ViewData["Title"] = "Equipe - Detalhes";
}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h3>@Model.Name</h3>
    <a class="btn btn-secondary" href="/Teams">Voltar</a>
</div>

<div class="row g-3">
    <div class="col-lg-6">
        <div class="card p-3">
            <h5>Membros</h5>
            <ul class="list-group list-group-flush">
                @foreach (var m in Model.TeamUsers)
                {
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <span>@m.User?.FullName (@m.User?.Email)</span>
                        <form asp-action="RemoveMember" method="post">
                            <input type="hidden" name="teamId" value="@Model.Id" />
                            <input type="hidden" name="userId" value="@m.UserId" />
                            <button class="btn btn-sm btn-outline-danger">Remover</button>
                        </form>
                    </li>
                }
            </ul>
            <form class="mt-3 d-flex" asp-action="AddMember" method="post">
                <input type="hidden" name="teamId" value="@Model.Id" />
                <select class="form-select me-2" name="userId" asp-items="ViewBag.AllUsers"></select>
                <button class="btn btn-primary">Adicionar</button>
            </form>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="card p-3">
            <h5>Projetos vinculados</h5>
            <ul class="list-group list-group-flush">
                @foreach (var p in Model.ProjectTeams)
                {
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <span>@p.Project?.Name</span>
                        <form asp-action="UnlinkProject" method="post">
                            <input type="hidden" name="teamId" value="@Model.Id" />
                            <input type="hidden" name="projectId" value="@p.ProjectId" />
                            <button class="btn btn-sm btn-outline-danger">Desvincular</button>
                        </form>
                    </li>
                }
            </ul>
            <form class="mt-3 d-flex" asp-action="LinkProject" method="post">
                <input type="hidden" name="teamId" value="@Model.Id" />
                <select class="form-select me-2" name="projectId" asp-items="ViewBag.AllProjects"></select>
                <button class="btn btn-primary">Vincular</button>
            </form>
        </div>
    </div>
</div>
